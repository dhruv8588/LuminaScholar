{% if user %}

  <!-- Modal -->
  <div class="modal fade" id="addUserAsReviewer" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-sm" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Did you mean this Reviewer?</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            <b>{{ user.first_name }} {{ user.last_name }}</b><br/>
            {{ user.email }}
        </div>    
        <div class="modal-footer justify-content-between">
          <button type="button" class="btn btn-secondary" data-dismiss="modal"><i class="fas fa-angle-left"></i>&nbsp;No</button>
          <a href="#" type="button" class="btn btn-primary" data-dismiss="modal" hx-post="{% url 'add_user_as_reviewer' paper_id user.id %}" hx-target="#add-remove_reviewers">Yes&nbsp;<i class="fas fa-angle-right"></i></a>
        </div>
      </div>
    </div>
  </div>

    <script> 
      $(document).ready(function() {
          var yesButtonClicked = false; 
    
          $('#addUserAsReviewer').modal('show');
          $('#AddNewReviewer').modal('hide');
    
          $('#addUserAsReviewer').on('hidden.bs.modal', function () {
              if (!yesButtonClicked) { 
                  $('#email').val("");
  
                  var message = "We removed the e-mail address you entered because it is associated with an existing account you chose not to use. Use a different e-mail address or, if you have changed your mind, you may enter the e-mail address again and link to the existing account.";
                  $('#message').text(message);
                  $('.error-message').text("");
  
                  $('#AddNewReviewer').modal('show');
              } else {
                  yesButtonClicked = false;
              }
            });
  
          $('#addUserAsReviewer .btn-primary').click(function () {
            yesButtonClicked = true;
          }); 
      }); 
    </script>


{% elif reviewer %}

  <!-- Modal -->
  <div class="modal fade" id="addReviewerAsReviewer" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-sm" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Did you mean this Reviewer?</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            <b>{{ reviewer.first_name }} {{ reviewer.last_name }}</b><br/>
            {{ reviewer.email }}
        </div>    
        <div class="modal-footer justify-content-between">
          <button type="button" class="btn btn-secondary" data-dismiss="modal"><i class="fas fa-angle-left"></i>&nbsp;No</button>
          <a href="#" type="button" class="btn btn-primary" data-dismiss="modal" hx-post="{% url 'add_reviewer_as_reviewer' paper_id reviewer.id %}" hx-target="#add-remove_reviewers">Yes&nbsp;<i class="fas fa-angle-right"></i></a>
        </div>
      </div>
    </div>
  </div>

  
  <script> 
    $(document).ready(function() {
        var yesButtonClicked = false; 
  
        $('#AddNewReviewer').modal('hide');
        $('#addReviewerAsReviewer').modal('show');
  
        $('#addReviewerAsReviewer').on('hidden.bs.modal', function () {
            if (!yesButtonClicked) { 
                $('#email').val("");

                var message = "We removed the e-mail address you entered because it is associated with an existing account you chose not to use. Use a different e-mail address or, if you have changed your mind, you may enter the e-mail address again and link to the existing account.";
                $('#message').text(message);
                $('.error-message').text("");

                $('#AddNewReviewer').modal('show');
            } else {
                yesButtonClicked = false;
            }
          });

        $('#addReviewerAsReviewer .btn-primary').click(function () {
          yesButtonClicked = true;
        }); 
    }); 
  </script>


{% endif %}


